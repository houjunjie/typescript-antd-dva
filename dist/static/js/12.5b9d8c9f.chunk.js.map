{"version":3,"sources":["routes/users/userlists.tsx","routes/users/Model.tsx","routes/users/users.less","webpack:///./src/routes/users/users.less?7b30"],"names":["Search","__WEBPACK_IMPORTED_MODULE_3_antd__","UserLists","_super","_this","apply","this","arguments","showModal","item","props","dispatch","type","payload","modalVisible","currentItem","handleSearch","val","searchValue","__extends","prototype","render","_a","userlists","loading","location","list","pagination","query","pathname","listProps","dataSource","columns","title","dataIndex","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","__WEBPACK_IMPORTED_MODULE_6__users_less___default","avatar","src","alt","sorter","b","Date","created_at","getTime","onClick","effects","onChange","page","__WEBPACK_IMPORTED_MODULE_2_dva_router__","push","search","__WEBPACK_IMPORTED_MODULE_4_query_string___default","stringify","__assign","current_page","current","per_page","pageSize","modalProps","visible","maskClosable","wrapClassName","onOk","data","onCancel","__WEBPACK_IMPORTED_MODULE_0_react__","align","span","style","marginBottom","width","placeholder","onSearch","enterButton","bordered","rowKey","record","id","__WEBPACK_IMPORTED_MODULE_5__Model__","PureComponent","__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_1_dva__","reasonType","__WEBPACK_IMPORTED_MODULE_2__utils_config__","FormItem","__WEBPACK_IMPORTED_MODULE_1_antd__","Item","TextArea","Option","formItemLayout","labelCol","wrapperCol","create","_b","_c","form","getFieldDecorator","validateFields","getFieldsValue","__rest","modalOpts","errors","freezeid","user_id","user_name","name","layout","label","hasFeedback","rules","required","message","showSearch","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","map","index","key","value","autosize","content","__webpack_require__","module","i","options","hmr","transform","locals","exports","undefined","textRight"],"mappings":"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","file":"static/js/12.5b9d8c9f.chunk.js","sourcesContent":["import React, { Fragment } from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'dva'\nimport { routerRedux } from 'dva/router'\nimport { Row, Col, Input, Table, Button } from 'antd'\nimport queryString from 'query-string'\nimport Model from './Model'\n\nimport style from './users.less'\n\n// import style from './songlists.less'\nconst { Search } = Input\ninterface Iprops {\n  userlists: any,\n  loading: any,\n  dispatch: any,\n  location: any\n}\n\nclass UserLists extends React.PureComponent<Iprops> {\n  \n  public showModal = (item: any) => {\n    this.props.dispatch({\n      type: 'userlists/updateState',\n      payload: {\n        modalVisible: true,\n        currentItem: item,\n      },\n    })\n  }\n  public handleSearch = (val: string) => {\n    this.props.dispatch({\n      type: 'userlists/updateState',\n      payload: {\n        searchValue: val,\n      },\n    })\n    this.props.dispatch({\n      type: 'userlists/query',\n      payload: {},\n    })\n  }\n  public render () {\n    const {\n      userlists, dispatch, loading, location,\n    } = this.props\n    const {\n      list, pagination, currentItem, modalVisible,\n    } = userlists\n    const { query, pathname } = location\n    const columns = [\n      {\n        title: '序号',\n        dataIndex: 'id',\n      },\n      {\n        title: '用户头像',\n        dataIndex: 'avatar',\n        render: (val: string) => <span className={style.avatar}><img src={val} alt=\"用户头像\" /></span>,\n      },\n      {\n        title: '用户昵称',\n        dataIndex: 'name',\n      },\n      {\n        title: '用户id',\n        dataIndex: 'user_id',\n      },\n      {\n        title: '注册时间',\n        dataIndex: 'created_at',\n        sorter: (a: any, b: any) => {\n          return new Date(a.created_at).getTime() - new Date(b.created_at).getTime()\n        },\n      },\n      {\n        title: '操作',\n        render: (val: any) => <Button onClick={() => this.showModal(val)}>封禁</Button>,\n      },\n    ]\n    const listProps = {\n      pagination,\n      dataSource: list,\n      columns,\n      loading: loading.effects['userlists/query'],\n      onChange (page: any) {\n        dispatch(routerRedux.push({\n          pathname,\n          search: queryString.stringify({\n            ...query,\n            current_page: page.current,\n            per_page: page.pageSize,\n          }),\n        }))\n      },\n    }\n    const modalProps = {\n      item: currentItem,\n      visible: modalVisible,\n      maskClosable: false,\n      // confirmLoading: loading.effects['user/update'],\n      title: '封禁用户',\n      wrapClassName: 'vertical-center-modal',\n      onOk (data: any) {\n        // console.log(data, 'ok')\n        dispatch({\n          type: 'userlists/freezeUser',\n          payload: {\n            // modalVisible: false,\n            ...data,\n          },\n        })\n        dispatch({\n          type: 'userlists/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n      onCancel () {\n        dispatch({\n          type: 'userlists/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n    }\n    // console.log('modalVisible', modalVisible)\n    return (\n      <Fragment>\n        <Row className=\"margin-bottom\" type=\"flex\" align=\"middle\">\n          <Col span={6}>\n            <h3 style={{ marginBottom: 0 }}>用户列表</h3>\n          </Col>\n          <Col span={18} className=\"text-right\">\n            <Search style={{ width: 200 }} placeholder=\"请输入要搜索的昵称\" onSearch={this.handleSearch} enterButton={true} />\n          </Col>\n        </Row>\n        <Table\n          {...listProps}\n          bordered={true}\n          // scroll={{ x: 1200 }}\n          // columns={columns}\n          // simple\n          rowKey={(record: any) => record.id}\n        />\n        {modalVisible && <Model {...modalProps} />}\n      </Fragment>\n    )\n  }\n}\nexport default connect(({\n  userlists, loading, dispatch,\n}: Iprops) => ({\n  userlists, loading, dispatch,\n}))(UserLists)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/users/userlists.tsx","import React from 'react'\n// import PropTypes from 'prop-types'\nimport { Form, Input, Modal, Select } from 'antd'\nimport config from '../../utils/config'\n\nconst { reasonType } = config\n\nconst FormItem = Form.Item\nconst { TextArea } = Input\nconst { Option } = Select\n\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n}\ninterface Iprops {\n  item: any,\n  onOk: any,\n  form: any,\n  // [propsnane: string]: any\n}\n\nconst modal = ({\n  item = {},\n  onOk,\n  form: {\n    getFieldDecorator,\n    validateFields,\n    getFieldsValue,\n  },\n  ...modalProps\n}: Iprops) => {\n  const handleOk = () => {\n    validateFields((errors: any) => {\n      if (errors) {\n        return\n      }\n      const data = {\n        ...getFieldsValue(),\n        freezeid: item.user_id,\n        user_name: item.name,\n      }\n      onOk(data)\n    })\n  }\n\n  const modalOpts = {\n    ...modalProps,\n    onOk: handleOk,\n  }\n  return (\n    <Modal {...modalOpts}>\n      <Form layout=\"horizontal\">\n        <FormItem label=\"封禁用户\" hasFeedback={true} {...formItemLayout}>\n          <span>{item.name}</span>\n        </FormItem>\n        <FormItem label=\"封禁时间\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('freeze_time', {\n            // initialValue: item.day,\n            rules: [\n              {\n                required: true,\n                message: '只能输入整数（必填）',\n              },\n            ],\n          })(<Input type=\"number\" placeholder=\"请输入封禁时间（小时）\" />)}\n        </FormItem>\n        <FormItem label=\"封禁原因\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('reason_type', {\n            rules: [\n              {\n                required: true,\n                message: '请选择封禁原因',\n              },\n            ],\n          })(<Select\n            showSearch={true}\n            placeholder=\"请选择原因\"\n            optionFilterProp=\"children\"\n            filterOption={(input: string, option: any) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n          >\n            {reasonType.map((data, index) => <Option key={index} value={index + 1}>{data}</Option>)}\n          </Select>)}\n        </FormItem>\n        <FormItem label=\"备注\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('remark', {\n            // initialValue: item.day,\n            rules: [\n              {\n                // required: true,\n              },\n            ],\n          })(<TextArea autosize={true} />)}\n        </FormItem>\n      </Form>\n    </Modal>\n  )\n}\n\n\nexport default Form.create()(modal)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/users/Model.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./users.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./users.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./users.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/users/users.less\n// module id = 1315\n// module chunks = 12","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".textRight_1H0Wz{text-align:right}.avatar_2FeH-{display:block;margin:0 auto;width:80px;height:80px;border-radius:50%;overflow:hidden}.avatar_2FeH- img{width:100%}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"textRight\": \"textRight_1H0Wz\",\n\t\"avatar\": \"avatar_2FeH-\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/typings-for-css-modules-loader/lib?{\"modules\":true,\"namedExport\":true,\"camelCase\":true,\"minimize\":true,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\"}!./node_modules/less-loader/dist/cjs.js!./src/routes/users/users.less\n// module id = 1316\n// module chunks = 12"],"sourceRoot":""}