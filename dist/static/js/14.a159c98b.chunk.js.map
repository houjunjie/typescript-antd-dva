{"version":3,"sources":["routes/song/Area/index.tsx","routes/song/Area/Model.tsx","routes/song/Area/index.less","webpack:///./src/routes/song/Area/index.less?f64e"],"names":["Area","_super","_this","apply","this","arguments","state","isCompileId","title","showModal","props","dispatch","type","payload","modalVisible","handleCompile","id","setState","handleTitle","e","target","value","changeTitle","item","sort","delArea","handleSearch","val","searchValue","__extends","prototype","render","_a","_b","area","loading","location","list","pagination","query","pathname","listProps","dataSource","columns","dataIndex","width","record","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","__WEBPACK_IMPORTED_MODULE_3_antd__","className","__WEBPACK_IMPORTED_MODULE_6__index_less___default","input","defaultValue","onChange","placeholder","size","onClick","button","areaTitle","effects","page","__WEBPACK_IMPORTED_MODULE_2_dva_router__","push","search","__WEBPACK_IMPORTED_MODULE_4_query_string___default","stringify","__assign","current_page","current","per_page","pageSize","modalProps","visible","maskClosable","wrapClassName","onOk","data","onCancel","__WEBPACK_IMPORTED_MODULE_0_react__","align","span","style","marginBottom","textRight","add","bordered","rowKey","__WEBPACK_IMPORTED_MODULE_5__Model__","PureComponent","__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_1_dva__","FormItem","__WEBPACK_IMPORTED_MODULE_1_antd__","Item","formItemLayout","labelCol","wrapperCol","create","_c","form","getFieldDecorator","validateFields","getFieldsValue","__rest","modalOpts","errors","layout","label","hasFeedback","initialValue","rules","required","message","name","content","__webpack_require__","module","i","options","hmr","transform","locals","exports","undefined"],"mappings":"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","file":"static/js/14.a159c98b.chunk.js","sourcesContent":["import React, { Fragment } from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'dva'\nimport { routerRedux } from 'dva/router'\nimport { Row, Col, Input, Table, Button } from 'antd'\nimport queryString from 'query-string'\nimport Model from './Model'\n\nimport style from './index.less'\n\n// import style from './songlists.less'\n\ninterface Iprops {\n  area: any,\n  loading: any,\n  dispatch: any,\n  location: any,\n}\ninterface Istate {\n  isCompileId: string,\n  title: string | null,\n}\nclass Area extends React.PureComponent<Iprops, Istate> {\n  \n  public state = {\n    isCompileId: '',\n    title: null,\n  }\n  public showModal = () => {\n    this.props.dispatch({\n      type: 'area/updateState',\n      payload: {\n        modalVisible: true,\n      },\n    })\n  }\n  public handleCompile = (id: any = '') => {\n    this.setState({\n      isCompileId: id,\n      title: null,\n    })\n  }\n  public handleTitle = (e: any) => { // 设置要修改的title\n    this.setState({\n      title: e.target.value,\n    })\n  }\n  public changeTitle = (item: any) => {\n    const { title } = this.state\n    this.props.dispatch({\n      type: 'area/updataTitle',\n      payload: {\n        id: item.id,\n        title: title || item.title,\n        sort: item.sort,\n      },\n    })\n    this.handleCompile()\n  }\n  public delArea = (item: any) => {\n    // console.log('item', item)\n    this.props.dispatch({\n      type: 'area/deleteArea',\n      payload: {\n        id: item.id,\n      },\n    })\n  }\n  public handleSearch = (val: string) => {\n    this.props.dispatch({\n      type: 'area/updateState',\n      payload: {\n        searchValue: val,\n      },\n    })\n    this.props.dispatch({\n      type: 'area/query',\n      payload: {},\n    })\n  }\n  public render () {\n    const {\n      isCompileId, title,\n    } = this.state\n    const {\n      area, dispatch, loading, location,\n    } = this.props\n    const {\n      list, pagination, modalVisible,\n    } = area\n    const { query, pathname } = location\n    const columns = [\n      {\n        title: '序号',\n\n        dataIndex: 'sort',\n      },\n      {\n        title: '专区名字',\n        dataIndex: 'title',\n        width: '40%',\n        render: (item: string, record: any) => {\n          return (\n            <div>\n\n              { isCompileId === record.id ?\n                <div>\n                  <Input\n                    className={style.input}\n                    defaultValue={title || item}\n                    onChange={e => this.handleTitle(e)}\n                    placeholder=\"专区名字\"\n                  /><Button size=\"small\" onClick={() => this.changeTitle(record)} className={style.button}>修改</Button><Button size=\"small\" onClick={this.handleCompile}>取消</Button>\n                </div> :\n                <div>\n                  <span className={style.areaTitle}>{item}</span><a onClick={() => { this.handleCompile(record.id) }}>编辑</a>\n                </div>\n              }\n            </div>\n          )\n        },\n      },\n      {\n        title: '歌单',\n        dataIndex: 'sheet_count',\n      },\n      {\n        title: '操作',\n        render: (record: any) => <Button onClick={() => this.delArea(record)}>删除</Button>,\n      },\n    ]\n    const listProps = {\n      pagination,\n      dataSource: list,\n      columns,\n      loading: loading.effects['area/query'],\n      onChange (page: any) {\n        dispatch(routerRedux.push({\n          pathname,\n          search: queryString.stringify({\n            ...query,\n            current_page: page.current,\n            per_page: page.pageSize,\n          }),\n        }))\n      },\n    }\n    const modalProps = {\n      item: {},\n      visible: modalVisible,\n      maskClosable: false,\n      // confirmLoading: loading.effects['user/update'],\n      title: '新增',\n      wrapClassName: 'vertical-center-modal',\n      onOk (data: any) {\n        // console.log(data)\n        dispatch({\n          type: 'area/addArea',\n          payload: {\n            ...data,\n          },\n        })\n        dispatch({\n          type: 'area/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n      onCancel () {\n        dispatch({\n          type: 'area/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n    }\n    return (\n      <Fragment>\n        <Row className=\"margin-bottom\" type=\"flex\" align=\"middle\">\n          <Col span={6}>\n            <h3 style={{ marginBottom: 0 }}>专区</h3>\n          </Col>\n          <Col span={18} className={style.textRight}>\n            <Button className={style.add} onClick={this.showModal}>新增专区</Button>\n          </Col>\n        </Row>\n        <Table\n          {...listProps}\n          bordered={true}\n          // scroll={{ x: 1200 }}\n          // columns={columns}\n          // simple\n          rowKey={record => record.id}\n        />\n        {modalVisible && <Model {...modalProps} />}\n      </Fragment>\n    )\n  }\n}\nexport default connect(({\n  area, loading, dispatch,\n}: Iprops) => ({\n  area, loading, dispatch,\n}))(Area)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/song/Area/index.tsx","import React from 'react'\n// import PropTypes from 'prop-types'\nimport { Form, Input, Modal } from 'antd'\n\nconst FormItem = Form.Item\n\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n}\ninterface Iprops {\n  item: any,\n  onOk: any,\n  form: any,\n  [propsname: string]: any\n}\n\nconst modal = ({\n  item = {},\n  onOk,\n  form: {\n    getFieldDecorator,\n    validateFields,\n    getFieldsValue,\n  },\n  ...modalProps\n}: Iprops) => {\n  // let loading = false\n  // const getBase64 = (img, callback) => {\n  //   const reader = new FileReader()\n  //   reader.addEventListener('load', () => callback(reader.result))\n  //   reader.readAsDataURL(img)\n  // }\n  const handleOk = () => {\n    validateFields((errors: any) => {\n      if (errors) {\n        return\n      }\n      const data = {\n        ...getFieldsValue(),\n      }\n      onOk(data)\n    })\n  }\n\n  const modalOpts = {\n    ...modalProps,\n    onOk: handleOk,\n  }\n  return (\n    <div>\n      <Modal {...modalOpts}>\n        <Form layout=\"horizontal\">\n          <FormItem label=\"序号\" hasFeedback={true} {...formItemLayout}>\n            {getFieldDecorator('sort', {\n            initialValue: item.sort,\n            rules: [\n              {\n                required: true,\n                message: '请输入序号',\n              },\n            ],\n          })(<Input type=\"number\" />)}\n          </FormItem>\n          <FormItem label=\"专区名字\" hasFeedback={true} {...formItemLayout}>\n            {getFieldDecorator('title', {\n            initialValue: item.name,\n            rules: [\n              {\n                required: true,\n                message: '请输入专区名字',\n              },\n            ],\n          })(<Input />)}\n          </FormItem>\n        </Form>\n      </Modal>\n    </div>\n  )\n}\n\nexport default Form.create()(modal)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/song/Area/Model.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./index.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./index.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/song/Area/index.less\n// module id = 1297\n// module chunks = 14","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".textRight_1jGEU{text-align:right}.add_2plYZ{margin-left:10px}.areaTitle_-GFXp{display:inline-block;min-width:100px}.input_3J4qF{width:150px}.button_Zmd-2,.input_3J4qF{margin-right:10px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"textRight\": \"textRight_1jGEU\",\n\t\"add\": \"add_2plYZ\",\n\t\"areaTitle\": \"areaTitle_-GFXp\",\n\t\"input\": \"input_3J4qF\",\n\t\"button\": \"button_Zmd-2\"\n};\n\n\n// WEBPACK FOOTER //\n// ./node_modules/typings-for-css-modules-loader/lib?{\"modules\":true,\"namedExport\":true,\"camelCase\":true,\"minimize\":true,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\"}!./node_modules/less-loader/dist/cjs.js!./src/routes/song/Area/index.less"],"sourceRoot":""}