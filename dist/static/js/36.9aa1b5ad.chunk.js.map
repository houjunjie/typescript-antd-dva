{"version":3,"sources":["routes/users/complaint.tsx","routes/users/Model.tsx"],"names":["reasonType","__WEBPACK_IMPORTED_MODULE_5__utils_config__","Search","__WEBPACK_IMPORTED_MODULE_3_antd__","Complaint","_super","_this","apply","this","arguments","showModal","item","props","dispatch","type","payload","modalVisible","currentItem","handleSearch","val","searchValue","__extends","prototype","render","_a","complaint","loading","location","list","pagination","query","pathname","listProps","dataSource","columns","title","dataIndex","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","src","alt","name","sorter","b","Date","created_at","getTime","onClick","effects","onChange","page","__WEBPACK_IMPORTED_MODULE_2_dva_router__","push","search","__WEBPACK_IMPORTED_MODULE_4_query_string___default","stringify","__assign","current_page","current","per_page","pageSize","modalProps","visible","maskClosable","wrapClassName","onOk","data","console","log","onCancel","__WEBPACK_IMPORTED_MODULE_0_react__","className","align","span","style","marginBottom","width","placeholder","onSearch","enterButton","bordered","rowKey","record","id","__WEBPACK_IMPORTED_MODULE_6__Model__","PureComponent","__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_1_dva__","__WEBPACK_IMPORTED_MODULE_2__utils_config__","FormItem","__WEBPACK_IMPORTED_MODULE_1_antd__","Item","TextArea","Option","formItemLayout","labelCol","wrapperCol","create","_b","_c","form","getFieldDecorator","validateFields","getFieldsValue","__rest","modalOpts","errors","freezeid","user_id","user_name","layout","label","hasFeedback","rules","required","message","showSearch","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","map","index","key","value","autosize"],"mappings":"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","file":"static/js/36.9aa1b5ad.chunk.js","sourcesContent":["import React, { Fragment } from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'dva'\nimport { routerRedux } from 'dva/router'\nimport { Row, Col, Input, Table, Button } from 'antd'\nimport queryString from 'query-string'\nimport config from '../../utils/config'\nimport Model from './Model'\n\nconst { reasonType } = config\n\n// import style from './songlists.less'\nconst { Search } = Input\n\ninterface Iprops {\n  complaint: any,\n  loading: any,\n  dispatch: any,\n  location: any,\n}\n\nclass Complaint extends React.PureComponent<Iprops> {\n  public showModal = (item: any) => {\n    this.props.dispatch({\n      type: 'complaint/updateState',\n      payload: {\n        modalVisible: true,\n        currentItem: item,\n      },\n    })\n  }\n  public handleSearch = (val: string) => {\n    this.props.dispatch({\n      type: 'freezeuser/updateState',\n      payload: {\n        searchValue: val,\n      },\n    })\n    this.props.dispatch({\n      type: 'complaint/query',\n      payload: {},\n    })\n  }\n  public render () {\n    const {\n      complaint, dispatch, loading, location,\n    } = this.props\n    const {\n      list, pagination, currentItem, modalVisible,\n    } = complaint\n    const { query, pathname } = location\n\n    const columns = [\n      {\n        title: '序号',\n        dataIndex: 'id',\n      },\n      {\n        title: '被举报用户头像',\n        dataIndex: 'avatar',\n        render: (val: string) => <img src={val} alt=\"用户头像\" />,\n      },\n      {\n        title: '被举报用户昵称',\n        dataIndex: 'target_user',\n        render: (item: any) => <span>{item.name}</span>,\n      },\n      {\n        title: '举报人',\n        dataIndex: 'user',\n        render: (item: any) => <span>{item.name}</span>,\n      },\n      {\n        title: '原因',\n        dataIndex: 'reason_type',\n        render: (item: number) => <span>{reasonType[item + 1]}</span>,\n      },\n      {\n        title: '备注',\n        dataIndex: 'remark',\n      },\n      {\n        title: '举报时间',\n        dataIndex: 'created_at',\n        sorter: (a: any, b: any) => {\n          return new Date(a.created_at).getTime() - new Date(b.created_at).getTime()\n        },\n      },\n      {\n        title: '操作',\n        render: (val: any) => <Button onClick={() => this.showModal(val)}>封禁</Button>,\n      },\n    ]\n    const listProps = {\n      pagination,\n      dataSource: list,\n      columns,\n      loading: loading.effects['complaint/query'],\n      onChange (page: any) {\n        dispatch(routerRedux.push({\n          pathname,\n          search: queryString.stringify({\n            ...query,\n            current_page: page.current,\n            per_page: page.pageSize,\n          }),\n        }))\n      },\n    }\n    const modalProps = {\n      item: currentItem,\n      visible: modalVisible,\n      maskClosable: false,\n      // confirmLoading: loading.effects['user/update'],\n      title: '高级筛选',\n      wrapClassName: 'vertical-center-modal',\n      onOk (data: any) {\n        console.log(data, 'ok')\n      },\n      onCancel () {\n        dispatch({\n          type: 'complaint/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n    }\n    console.log('modalVisible', modalVisible)\n    return (\n      <Fragment>\n        <Row className=\"margin-bottom\" type=\"flex\" align=\"middle\">\n          <Col span={6}>\n            <h3 style={{ marginBottom: 0 }}>举报的用户</h3>\n          </Col>\n          <Col span={18} className=\"text-right\">\n            <Search style={{ width: 200 }} placeholder=\"请输入要搜索的昵称\" onSearch={this.handleSearch} enterButton={true} />\n          </Col>\n        </Row>\n        <Table\n          {...listProps}\n          bordered={true}\n          // scroll={{ x: 1200 }}\n          // columns={columns}\n          // simple\n          rowKey={(record: any) => record.id}\n        />\n        {modalVisible && <Model {...modalProps} />}\n      </Fragment>\n    )\n  }\n}\nexport default connect(({\n  complaint, loading, dispatch,\n}: Iprops) => ({\n  complaint, loading, dispatch,\n}))(Complaint)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/users/complaint.tsx","import React from 'react'\n// import PropTypes from 'prop-types'\nimport { Form, Input, Modal, Select } from 'antd'\nimport config from '../../utils/config'\n\nconst { reasonType } = config\n\nconst FormItem = Form.Item\nconst { TextArea } = Input\nconst { Option } = Select\n\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n}\ninterface Iprops {\n  item: any,\n  onOk: any,\n  form: any,\n  // [propsnane: string]: any\n}\n\nconst modal = ({\n  item = {},\n  onOk,\n  form: {\n    getFieldDecorator,\n    validateFields,\n    getFieldsValue,\n  },\n  ...modalProps\n}: Iprops) => {\n  const handleOk = () => {\n    validateFields((errors: any) => {\n      if (errors) {\n        return\n      }\n      const data = {\n        ...getFieldsValue(),\n        freezeid: item.user_id,\n        user_name: item.name,\n      }\n      onOk(data)\n    })\n  }\n\n  const modalOpts = {\n    ...modalProps,\n    onOk: handleOk,\n  }\n  return (\n    <Modal {...modalOpts}>\n      <Form layout=\"horizontal\">\n        <FormItem label=\"封禁用户\" hasFeedback={true} {...formItemLayout}>\n          <span>{item.name}</span>\n        </FormItem>\n        <FormItem label=\"封禁时间\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('freeze_time', {\n            // initialValue: item.day,\n            rules: [\n              {\n                required: true,\n                message: '只能输入整数（必填）',\n              },\n            ],\n          })(<Input type=\"number\" placeholder=\"请输入封禁时间（小时）\" />)}\n        </FormItem>\n        <FormItem label=\"封禁原因\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('reason_type', {\n            rules: [\n              {\n                required: true,\n                message: '请选择封禁原因',\n              },\n            ],\n          })(<Select\n            showSearch={true}\n            placeholder=\"请选择原因\"\n            optionFilterProp=\"children\"\n            filterOption={(input: string, option: any) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n          >\n            {reasonType.map((data, index) => <Option key={index} value={index + 1}>{data}</Option>)}\n          </Select>)}\n        </FormItem>\n        <FormItem label=\"备注\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('remark', {\n            // initialValue: item.day,\n            rules: [\n              {\n                // required: true,\n              },\n            ],\n          })(<TextArea autosize={true} />)}\n        </FormItem>\n      </Form>\n    </Modal>\n  )\n}\n\n\nexport default Form.create()(modal)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/users/Model.tsx"],"sourceRoot":""}