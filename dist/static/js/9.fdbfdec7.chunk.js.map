{"version":3,"sources":["routes/works/unauditedworks.tsx","routes/works/works.less","webpack:///./src/routes/works/works.less?fa5d","routes/works/Modals/notPassModal.tsx"],"names":["Search","__WEBPACK_IMPORTED_MODULE_3_antd__","UnauditedWorks","_super","_this","apply","this","arguments","passModal","item","dispatch","props","confirm","title","content","onOk","type","payload","status","id","onCancel","console","log","notPassModal","modalVisible","currentItem","handleSearch","val","searchValue","__extends","prototype","render","_a","unauditedworks","loading","location","list","pagination","query","pathname","listProps","dataSource","columns","dataIndex","text","record","index","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","__WEBPACK_IMPORTED_MODULE_6__works_less___default","avatar","src","alt","name","sorter","b","Date","created_at","getTime","updated_at","mr10","onClick","effects","onChange","page","__WEBPACK_IMPORTED_MODULE_2_dva_router__","push","search","__WEBPACK_IMPORTED_MODULE_4_query_string___default","stringify","__assign","current_page","current","per_page","pageSize","modalProps","visible","maskClosable","wrapClassName","data","__WEBPACK_IMPORTED_MODULE_0_react__","align","span","style","marginBottom","textRight","width","placeholder","onSearch","enterButton","bordered","rowKey","__WEBPACK_IMPORTED_MODULE_5__Modals_notPassModal__","PureComponent","__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_1_dva__","__webpack_require__","module","i","options","hmr","transform","locals","exports","undefined","reasonType","__WEBPACK_IMPORTED_MODULE_2__utils_config__","FormItem","__WEBPACK_IMPORTED_MODULE_1_antd__","Item","Option","TextArea","formItemLayout","labelCol","wrapperCol","create","_b","_c","form","getFieldDecorator","validateFields","getFieldsValue","__rest","modalOpts","errors","layout","label","hasFeedback","rules","required","message","showSearch","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","map","key","value","autosize"],"mappings":"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","file":"static/js/9.fdbfdec7.chunk.js","sourcesContent":["import React, { Fragment } from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'dva'\nimport { routerRedux } from 'dva/router'\nimport { Row, Col, Input, Table, Button, Modal } from 'antd'\nimport queryString from 'query-string'\nimport Model from './Modals/notPassModal'\n\nimport style from './works.less'\n\n// import style from './songlists.less'\nconst { Search } = Input\ninterface Iprops {\n  unauditedworks: any,\n  loading: any,\n  dispatch: any,\n  location: any,\n}\n\nclass UnauditedWorks extends React.PureComponent<Iprops> {\n  public passModal = (item: any) => {\n    const { dispatch } = this.props\n    Modal.confirm({\n      title: '审核通过',\n      content: '您是否确认要审核通过',\n      onOk () {\n        dispatch({\n          type: 'unauditedworks/pass',\n          payload: {\n            status: 1,\n            id: item.id,\n          },\n        })\n      },\n      onCancel () {console.log(1)},\n    })\n    // this.props.dispatch({\n    //   type: 'workslists/updateState',\n    //   payload: {\n    //     modalVisible: true,\n    //     currentItem: item,\n    //   },\n    // })\n  }\n  public notPassModal = (item: string) => {\n    // const { dispatch } = this.props\n    this.props.dispatch({\n      type: 'unauditedworks/updateState',\n      payload: {\n        modalVisible: true,\n        currentItem: item,\n      },\n    })\n  }\n  public handleSearch = (val: string) => {\n    this.props.dispatch({\n      type: 'unauditedworks/updateState',\n      payload: {\n        searchValue: val,\n      },\n    })\n    this.props.dispatch({\n      type: 'unauditedworks/query',\n      payload: {},\n    })\n  }\n  public render () {\n    const {\n      unauditedworks, dispatch, loading, location,\n    } = this.props\n    const {\n      list, pagination, currentItem, modalVisible,\n    } = unauditedworks\n    const { query, pathname } = location\n    const columns = [\n      {\n        title: '序号',\n        dataIndex: '',\n        render (text: any, record: any, index: number) {\n          // TODO\n          return index + 1\n        },\n      },\n      {\n        title: '视频',\n        dataIndex: 'file',\n        render: (val: string) => <span className={style.avatar}><img src={val} alt=\"用户头像\" /></span>,\n      },\n      {\n        title: '配文',\n        dataIndex: 'description',\n      },\n      {\n        title: '用户',\n        dataIndex: 'user',\n        render: (item: any) => <span>{item.name}</span>,\n      },\n      {\n        title: '提交时间',\n        dataIndex: 'created_at',\n        sorter: (a: any, b: any) => {\n          return new Date(a.created_at).getTime() - new Date(b.created_at).getTime()\n        },\n      },\n      {\n        title: '审核时间',\n        dataIndex: 'updated_at',\n        sorter: (a: any, b: any) => {\n          return new Date(a.updated_at).getTime() - new Date(b.updated_at).getTime()\n        },\n      },\n      {\n        title: '审核人',\n        dataIndex: 'user_id',\n      },\n      {\n        title: '操作',\n        render: (val: any) => (<div>\n          <Button className={style.mr10} onClick={() => this.passModal(val)}>通过</Button>\n          <Button onClick={() => this.notPassModal(val)}>不通过</Button>\n        </div>),\n      },\n    ]\n    const listProps = {\n      pagination,\n      dataSource: list,\n      columns,\n      loading: loading.effects['unauditedworks/query'],\n      onChange (page: any) {\n        dispatch(routerRedux.push({\n          pathname,\n          search: queryString.stringify({\n            ...query,\n            current_page: page.current,\n            per_page: page.pageSize,\n          }),\n        }))\n      },\n    }\n    const modalProps = {\n      item: currentItem,\n      visible: modalVisible,\n      maskClosable: false,\n      // confirmLoading: loading.effects['user/update'],\n      title: '审核不通过',\n      wrapClassName: 'vertical-center-modal',\n      onOk (data: any) {\n        dispatch({\n          type: 'unauditedworks/pass',\n          payload: {\n            // modalVisible: false,\n            status: 2,\n            ...data,\n          },\n        })\n        dispatch({\n          type: 'unauditedworks/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n      onCancel () {\n        dispatch({\n          type: 'unauditedworks/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n    }\n    // console.log('modalVisible', modalVisible)\n    return (\n      <Fragment>\n        <Row className=\"margin-bottom\" type=\"flex\" align=\"middle\">\n          <Col span={6}>\n            <h3 style={{ marginBottom: 0 }}>未审核作品</h3>\n          </Col>\n          <Col span={18} className={style.textRight}>\n            <Search style={{ width: 300 }} placeholder=\"请输入要搜索的作品名称\" onSearch={this.handleSearch} enterButton={true} />\n          </Col>\n        </Row>\n        <Table\n          {...listProps}\n          bordered={true}\n          // scroll={{ x: 1200 }}\n          // columns={columns}\n          rowKey={record => record.id}\n        />\n        {modalVisible && <Model {...modalProps} />}\n      </Fragment>\n    )\n  }\n}\nexport default connect(({\n  unauditedworks, loading, dispatch,\n}: Iprops) => ({\n  unauditedworks, loading, dispatch,\n}))(UnauditedWorks)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/works/unauditedworks.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/works/works.less\n// module id = 1266\n// module chunks = 9 10 11 30 31 32","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".textRight_2G87a{text-align:right}.avatar_2V6Bf{display:block;margin:0 auto;width:80px;height:80px;border-radius:50%;overflow:hidden}.avatar_2V6Bf img{width:100%}.mr10_3sCER{margin-right:10px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"textRight\": \"textRight_2G87a\",\n\t\"avatar\": \"avatar_2V6Bf\",\n\t\"mr10\": \"mr10_3sCER\"\n};\n\n\n// WEBPACK FOOTER //\n// ./node_modules/typings-for-css-modules-loader/lib?{\"modules\":true,\"namedExport\":true,\"camelCase\":true,\"minimize\":true,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js!./src/routes/works/works.less","import React from 'react'\n// import PropTypes from 'prop-types'\nimport { Form, Input, Modal, Select } from 'antd'\nimport config from '../../../utils/config'\n\nconst { reasonType } = config\n\nconst FormItem = Form.Item\nconst { Option } = Select\nconst { TextArea } = Input\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n}\ninterface Iprops {\n  item: any,\n  onOk: any,\n  form: any,\n  [propsname: string]: any\n}\n\nconst modal = ({\n  item = {},\n  onOk,\n  form: {\n    getFieldDecorator,\n    validateFields,\n    getFieldsValue,\n  },\n  ...modalProps\n}: Iprops) => {\n  const handleOk = () => {\n    validateFields((errors: any) => {\n      if (errors) {\n        return\n      }\n      const data = {\n        ...getFieldsValue(),\n        id: item.id,\n      }\n      onOk(data)\n    })\n  }\n\n  const modalOpts = {\n    ...modalProps,\n    onOk: handleOk,\n  }\n  return (\n    <Modal {...modalOpts}>\n      <Form layout=\"horizontal\">\n        <FormItem label=\"封禁原因\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('reason_type', {\n            rules: [\n              {\n                required: true,\n                message: '请选择封禁原因',\n              },\n            ],\n          })(<Select\n            showSearch={true}\n            placeholder=\"请选择原因\"\n            optionFilterProp=\"children\"\n            filterOption={(input: string, option: any) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n          >\n            {reasonType.map((data, index) => <Option key={index} value={index + 1}>{data}</Option>)}\n          </Select>)}\n        </FormItem>\n        <FormItem label=\"备注\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('remark', {\n            // initialValue: item.day,\n            rules: [\n              {\n                // required: true,\n              },\n            ],\n          })(<TextArea autosize={true} />)}\n        </FormItem>\n      </Form>\n    </Modal>\n  )\n}\n\n// modal.propTypes = {\n//   form: PropTypes.object.isRequired,\n//   type: PropTypes.string,\n//   item: PropTypes.object,\n//   onOk: PropTypes.func,\n// }\n\nexport default Form.create()(modal)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/works/Modals/notPassModal.tsx"],"sourceRoot":""}