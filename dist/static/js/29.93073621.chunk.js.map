{"version":3,"sources":["models/active/vote.tsx","../node_modules/dva-model-extend/lib/index.js","models/common.tsx","services/active.ts"],"names":["__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_dva_model_extend___default","__WEBPACK_IMPORTED_MODULE_2__models_common__","namespace","state","currentItem","modalVisible","detailVisible","detail","list","pagination","showSizeChanger","showQuickJumper","showTotal","total","current","pageSize","searchValue","user","subscriptions","setup","_a","dispatch","history","listen","location","pathname","type","payload","__assign","__WEBPACK_IMPORTED_MODULE_4_query_string___default","a","parse","search","effects","query","_b","call","put","select","vote","_c","sent","__WEBPACK_IMPORTED_MODULE_1__services_active__","name","data","success","activity","Number","current_page","per_page","addVote","__WEBPACK_IMPORTED_MODULE_3_antd__","queryDetail","simp_name","activity_song","queryVoterdetail","activity_user","updatevote","act_id","reducers","updateState","updateDetailState","updateUserState","Object","defineProperty","exports","value","_assign2","_interopRequireDefault","__webpack_require__","_typeof3","obj","__esModule","default","stateCache","stateCount","subscriptionsCache","subscriptionsCount","effectsCache","effectsCount","reducersCache","reducersCount","_len","arguments","length","models","Array","_key","model","reduce","acc","extend","isArray","check","log","origin","cache","count","constitute","pageModel","querySuccess","params","__WEBPACK_IMPORTED_MODULE_2__utils_request__","url","voteList","method","SystemAdmin","__WEBPACK_IMPORTED_MODULE_0__utils_utils__","replace","id","activitysong","voterdetail","api","__WEBPACK_IMPORTED_MODULE_1__utils_config__"],"mappings":"m6CA0BAA,EAAA,QAAeC,GAAf,CAA2BC,EAAA,GACzBC,UAAW,OACXC,OACEC,eACAC,cAAc,EACdC,eAAe,EAEfC,QACEC,QACAC,YACEC,iBAAiB,EACjBC,iBAAiB,EACjBC,UAAW,SAACC,GAAe,gBAAKA,EAAK,uBACrCC,QAAS,EACTD,MAAO,EACPE,SAAU,IAEZC,YAAa,IAEfC,MACET,QACAC,YACEC,iBAAiB,EACjBC,iBAAiB,EACjBC,UAAW,SAACC,GAAe,gBAAKA,EAAK,uBACrCC,QAAS,EACTD,MAAO,EACPE,SAAU,MAIhBG,eACEC,MAAK,SAAEC,OAAEC,EAAAD,EAAAC,SAAUD,EAAAE,QACTC,OAAO,SAACC,GACY,iBAAtBA,EAASC,UACXJ,GACEK,KAAM,QACNC,QAAOC,KAEFC,EAAAC,EAAYC,MAAMP,EAASQ,eAO1CC,SACIC,MAAK,SAAEd,EAAkBe,aAAhBR,EAAAP,EAAAO,QAAkBS,EAAAD,EAAAC,KAAMC,EAAAF,EAAAE,IAAKC,EAAAH,EAAAG,wDAClB,SAAMA,EAAO,SAACnC,GAAe,OAAAA,EAAMoC,KAAKvB,sBAC/C,OADPA,EAAcwB,EAAAC,QACP,EAAML,EAAKM,EAAA,EAAad,KAAOD,GAASgB,KAAM3B,oBAArD4B,EAAOJ,EAAAC,QACJI,SACCC,EAAaF,EAAKA,KAAIE,UAC9B,EAAMT,GACJX,KAAM,eACNC,SACEnB,KAAMsC,EAASF,KACfnC,YACEK,QAASiC,OAAOpB,EAAQqB,eAAiB,EACzCjC,SAAUgC,OAAOpB,EAAQsB,WAAa,GACtCpC,MAAOiC,EAASjC,aATpB,mBAEF2B,EAAAC,oBAYA,MAAMG,uBAGRM,QAAO,SAAE9B,EAEHe,SADNR,EAAAP,EAAAO,QACQS,EAAAD,EAAAC,KAAMC,EAAAF,EAAAE,qDACD,SAAMD,EAAKM,EAAA,EAASf,kBAA3BiB,EAAOJ,EAAAC,QACJI,SACPM,EAAA,EAAQN,QAAQ,6BAEhB,EAAMR,GACJX,KAAM,QACNC,gBALA,YAQF,OALAa,EAAAC,QAKA,EAAMJ,GACJX,KAAM,cACNC,SACEtB,cAAc,oBAHlBmC,EAAAC,oBAOA,MAAMG,uBAGRQ,YAAW,SAAEhC,EAAkBe,aAAhBR,EAAAP,EAAAO,QAAkBS,EAAAD,EAAAC,KAAMC,EAAAF,EAAAE,IAAKC,EAAAH,EAAAG,wDACxB,SAAMA,EAAO,SAACnC,GAAe,OAAAA,EAAMoC,KAAKvB,sBAC/C,OADPA,EAAcwB,EAAAC,QACP,EAAML,EAAKM,EAAA,EAAqBd,KAAOD,GAAS0B,UAAWrC,oBAAlE4B,EAAOJ,EAAAC,QACJI,SACDS,EAAgBV,EAAKA,KAAKU,eAChC,EAAMjB,GACJX,KAAM,oBACNC,SACEnB,KAAM8C,EAAcV,KACpBnC,YACEK,QAASiC,OAAOpB,EAAQqB,eAAiB,EACzCjC,SAAUgC,OAAOpB,EAAQsB,WAAa,GACtCpC,MAAOyC,EAAczC,aATzB,mBAEF2B,EAAAC,oBAYA,MAAMG,uBAGRW,iBAAgB,SAAEnC,EAAkBe,WAAhBR,EAAAP,EAAAO,QAAkBS,EAAAD,EAAAC,KAAMC,EAAAF,EAAAE,qDAE/B,SAAMD,EAAKM,EAAA,EAAsBf,kBAAxCiB,EAAOJ,EAAAC,QACJI,SACDW,EAAgBZ,EAAKA,KAAKY,eAChC,EAAMnB,GACJX,KAAM,kBACNC,SACEnB,KAAMgD,EAAcZ,KACpBnC,YACEK,QAASiC,OAAOpB,EAAQqB,eAAiB,EACzCjC,SAAUgC,OAAOpB,EAAQsB,WAAa,GACtCpC,MAAO2C,EAAc3C,aATzB,mBAEF2B,EAAAC,oBAYA,MAAMG,uBAGRa,WAAU,SAAErC,EAAkBe,SAAhBR,EAAAP,EAAAO,QAAkBS,EAAAD,EAAAC,KAAMC,EAAAF,EAAAE,qDACzB,SAAMD,EAAKM,EAAA,EAAiBf,kBAAnCiB,EAAOJ,EAAAC,QACJI,SACPM,EAAA,EAAQN,QAAQ,6BAChB,EAAMR,GACJX,KAAM,cACNC,SACE+B,OAAQ/B,EAAQ+B,aALlB,mBAEFlB,EAAAC,oBAOA,MAAMG,wBAIZe,UACEC,YAAW,SAAEzD,EAAeiB,OAAEO,EAAAP,EAAAO,QAC5B,OAAAC,KACKzB,EACAwB,IAGPkC,kBAAiB,SAAE1D,EAAeiB,OAAEO,EAAAP,EAAAO,QAElC,OAAAC,KACKzB,GACHI,OAAMqB,KACDzB,EAAMI,OACNoB,MAITmC,gBAAe,SAAE3D,EAAeiB,OAAEO,EAAAP,EAAAO,QAEhC,OAAAC,KACKzB,GACHc,KAAIW,KACCzB,EAAMc,KACNU,4CC/LboC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAGA,IAEAC,EAAAC,EAFAC,EAAA,MAMAC,EAAAF,EAFAC,EAAA,KAMA,SAAAD,EAAAG,GAAsC,OAAAA,KAAAC,WAAAD,GAAuCE,QAAAF,GAF7EN,EAAAQ,QA6BA,WAWA,IAVA,IACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KAEAC,EAAAC,UAAAC,OAAAC,EAAAC,MAAAJ,GAAAK,EAAA,EAAmEA,EAAAL,EAAaK,IAChFF,EAAAE,GAAAJ,UAAAI,GAGA,IAAAC,EAAAH,EAAAI,OAAA,SAAAC,EAAAC,GAcA,OAbAD,EAAAxF,UAAAyF,EAAAzF,UACA,cAAAoE,EAAAG,SAAAkB,EAAAxF,QAAAmF,MAAAM,QAAAD,EAAAxF,OAGK,UAAAwF,IACLD,EAAAvF,MAAAwF,EAAAxF,QAHA0F,EAAAF,EAAAxF,MAAAuE,EAAAC,IACA,EAAAR,EAAAM,SAAAiB,EAAAvF,MAAAwF,EAAAxF,QAIA0F,EAAAF,EAAAzE,cAAA0D,EAAAC,IACA,EAAAV,EAAAM,SAAAiB,EAAAxE,cAAAyE,EAAAzE,eACA2E,EAAAF,EAAA1D,QAAA6C,EAAAC,IACA,EAAAZ,EAAAM,SAAAiB,EAAAzD,QAAA0D,EAAA1D,SACA4D,EAAAF,EAAAhC,SAAAqB,EAAAC,IACA,EAAAd,EAAAM,SAAAiB,EAAA/B,SAAAgC,EAAAhC,UACA+B,IA5BcvF,SAAUe,iBAAmBe,WAAa0B,cAmCxD,OAJAmC,EAAAN,EAAA,QAAAb,GACAmB,EAAAN,EAAA,gBAAAX,GACAiB,EAAAN,EAAA,UAAAT,GACAe,EAAAN,EAAA,WAAAP,GACAO,GA7DA,IAAAK,EAAA,SAAAE,EAAAC,EAAAC,KAYAH,EAAA,SAAAN,EAAAU,EAAAD,uRC5BaT,GACX7B,UACEC,YAAW,SAAEzD,EAAYiB,OAAEO,EAAAP,EAAAO,QACzB,OAAAC,KACKzB,EACAwB,MAMEwE,EAAYnG,IAAYwF,GAEnCrF,OACEK,QACAC,YACEC,iBAAiB,EACjBC,iBAAiB,EACjBC,UAAW,SAACC,GAAkB,gBAAKA,EAAK,uBACxCC,QAAS,EACTD,MAAO,EACPE,SAAU,IAEZC,YAAa,IAGf2C,UACEyC,aAAY,SAAEjG,EAAYiB,OAAEO,EAAAP,EAAAO,QAClBnB,EAAAmB,EAAAnB,KAAMC,EAAAkB,EAAAlB,WACd,OAAAmB,KACKzB,GACHK,KAAIA,EACJC,WAAUmB,KACLzB,EAAMM,WACNA,gDCvBP,SAAyB4F,GAC7B,OAAOtC,OAAAuC,EAAA,EAAAvC,EACLwC,IAAKC,EACLC,OAAQ,MACR7D,KAAMyD,SAIJ,SAAmBA,GACvB,IAAMK,EAAc3C,OAAA4C,EAAA,EAAA5C,CAAgB,eACpC,OAAOA,OAAAuC,EAAA,EAAAvC,EACLwC,IAAKzD,EAAS8D,QAAQ,OAAQF,EAAYG,IAC1CJ,OAAQ,OACR7D,KAAMyD,SAGJ,SAAiCA,GACrC,OAAOtC,OAAAuC,EAAA,EAAAvC,EACLwC,IAAKO,EACLL,OAAQ,MACR7D,KAAMyD,SAGJ,SAAgCA,GACpC,OAAOtC,OAAAuC,EAAA,EAAAvC,EACLwC,IAAKQ,EAAYH,QAAQ,UAAWP,EAAO3C,QAC3C+C,OAAQ,aAMN,SAA2BJ,GAC/B,IAAMK,EAAc3C,OAAA4C,EAAA,EAAA5C,CAAgB,eAC9BwC,EAAM9C,EAAWmD,QAAQ,OAAQF,EAAYG,IACnD,OAAO9C,OAAAuC,EAAA,EAAAvC,EACLwC,IAAKA,EAAIK,QAAQ,MAAOP,EAAOQ,IAC/BJ,OAAQ,MACR7D,KAAMyD,mCA/CFW,EAAAC,EAAA,EAAAD,IAENR,EAAAQ,EAAAR,SACA1D,EAAAkE,EAAAlE,SACAgE,EAAAE,EAAAF,aACAC,EAAAC,EAAAD,YACAtD,EAAAuD,EAAAvD","file":"static/js/29.93073621.chunk.js","sourcesContent":["import modelExtend from 'dva-model-extend'\nimport { queryVoteList, addVote, queryActivitysongList, queryVoterdetailList, queryUpdatevote } from '../../services/active'\nimport { pageModel } from '../../models/common'\nimport { message } from 'antd'\nimport queryString from 'query-string'\n// import { message } from 'antd'\ninterface Ipagination {\n  showSizeChanger: boolean,\n  showQuickJumper: boolean,\n  showTotal: string,\n  current: number,\n  total: number,\n  pageSize: number\n}\ninterface Idetail {\n  list: any[],\n  pagination: Ipagination\n}\ninterface Istate {\n  currentItem: any,\n  modalVisible: boolean,\n  detailVisible: boolean,\n  detail: Idetail,\n  user: Idetail\n}\n\nexport default modelExtend(pageModel, {\n  namespace: 'vote',\n  state: {\n    currentItem: {},\n    modalVisible: false,\n    detailVisible: false,\n    // searchValue: '',\n    detail: {\n      list: [],\n      pagination: {\n        showSizeChanger: true,\n        showQuickJumper: true,\n        showTotal: (total: any) => `共 ${total} 条数据`,\n        current: 1,\n        total: 0,\n        pageSize: 10,\n      },\n      searchValue: '',\n    },\n    user: {\n      list: [],\n      pagination: {\n        showSizeChanger: true,\n        showQuickJumper: true,\n        showTotal: (total: any) => `共 ${total} 条数据`,\n        current: 1,\n        total: 0,\n        pageSize: 10,\n      },\n    },\n  },\n  subscriptions: {\n    setup ({ dispatch, history }: any) {\n      history.listen((location: any) => {\n        if (location.pathname === '/active/vote') {\n          dispatch({\n            type: 'query',\n            payload: {\n              // status: 2,\n              ...queryString.parse(location.search),\n            },\n          })\n        }\n      })\n    },\n  },\n  effects: {\n    * query ({ payload }: any, { call, put, select }: any) {\n      const searchValue = yield select((state: any) => state.vote.searchValue)\n      const data = yield call(queryVoteList, { ...payload, name: searchValue })\n      if (data.success) {\n        const { activity } = data.data\n        yield put({\n          type: 'querySuccess',\n          payload: {\n            list: activity.data,\n            pagination: {\n              current: Number(payload.current_page) || 1,\n              pageSize: Number(payload.per_page) || 10,\n              total: activity.total,\n            },\n          },\n        })\n      } else {\n        throw data\n      }\n    },\n    * addVote ({\n      payload,\n    }: any, { call, put }: any) {\n      const data = yield call(addVote, payload)\n      if (data.success) {\n        message.success('添加成功')\n        // const { focus } = data.data\n        yield put({\n          type: 'query',\n          payload: {\n          },\n        })\n        yield put({\n          type: 'updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      } else {\n        throw data\n      }\n    },\n    * queryDetail ({ payload }: any, { call, put, select }: any) {\n      const searchValue = yield select((state: any) => state.vote.searchValue)\n      const data = yield call(queryActivitysongList, { ...payload, simp_name: searchValue })\n      if (data.success) {\n        const activity_song = data.data.activity_song\n        yield put({\n          type: 'updateDetailState',\n          payload: {\n            list: activity_song.data,\n            pagination: {\n              current: Number(payload.current_page) || 1,\n              pageSize: Number(payload.per_page) || 10,\n              total: activity_song.total,\n            },\n          },\n        })\n      } else {\n        throw data\n      }\n    },\n    * queryVoterdetail ({ payload }: any, { call, put }: any) {\n      // const searchValue = yield select(state => state.vote.detail.searchValue)\n      const data = yield call(queryVoterdetailList, payload)\n      if (data.success) {\n        const activity_user = data.data.activity_user\n        yield put({\n          type: 'updateUserState',\n          payload: {\n            list: activity_user.data,\n            pagination: {\n              current: Number(payload.current_page) || 1,\n              pageSize: Number(payload.per_page) || 10,\n              total: activity_user.total,\n            },\n          },\n        })\n      } else {\n        throw data\n      }\n    },\n    * updatevote ({ payload }: any, { call, put }: any) {\n      const data = yield call(queryUpdatevote, payload)\n      if (data.success) {\n        message.success('修改成功')\n        yield put({\n          type: 'queryDetail',\n          payload: {\n            act_id: payload.act_id,\n          },\n        })\n      } else {\n        throw data\n      }\n    },\n  },\n  reducers: {\n    updateState (state: Istate, { payload }: any) {\n      return {\n        ...state,\n        ...payload,\n      }\n    },\n    updateDetailState (state: Istate, { payload }: any) {\n      // let detail = state.detail\n      return {\n        ...state,\n        detail: {\n          ...state.detail,\n          ...payload,\n        },\n      }\n    },\n    updateUserState (state: Istate, { payload }: any) {\n      // let detail = state.detail\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          ...payload,\n        },\n      }\n    },\n  },\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/active/vote.tsx","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign = require('babel-runtime/core-js/object/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nexports.default = modelExtend;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar check = function check(origin, cache, count) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var key in origin) {\n      if (cache.indexOf(key) === -1) {\n        cache.push(key);\n      } else {\n        count[key] ? count[key]++ : count[key] = 1;\n      }\n    }\n  }\n};\n\nvar log = function log(model, constitute, count) {\n  if (process.env.NODE_ENV !== 'production') {\n    var logCount = 0;\n    for (var key in count) {\n      if (!logCount) {\n        console.warn('Please note that some of the attributes are inherited in the ' + model.namespace + ' / ' + constitute + ':');\n      }\n      logCount++;\n      console.warn('  -> ' + key + ' be overwritten ' + count[key] + ' time(s).');\n    }\n  }\n};\n\nfunction modelExtend() {\n  var base = { state: {}, subscriptions: {}, effects: {}, reducers: {} };\n  var stateCache = [];\n  var stateCount = {};\n  var subscriptionsCache = [];\n  var subscriptionsCount = {};\n  var effectsCache = [];\n  var effectsCount = {};\n  var reducersCache = [];\n  var reducersCount = {};\n\n  for (var _len = arguments.length, models = Array(_len), _key = 0; _key < _len; _key++) {\n    models[_key] = arguments[_key];\n  }\n\n  var model = models.reduce(function (acc, extend) {\n    acc.namespace = extend.namespace;\n    if ((0, _typeof3.default)(extend.state) === 'object' && !Array.isArray(extend.state)) {\n      check(extend.state, stateCache, stateCount);\n      (0, _assign2.default)(acc.state, extend.state);\n    } else if ('state' in extend) {\n      acc.state = extend.state;\n    }\n    check(extend.subscriptions, subscriptionsCache, subscriptionsCount);\n    (0, _assign2.default)(acc.subscriptions, extend.subscriptions);\n    check(extend.effects, effectsCache, effectsCount);\n    (0, _assign2.default)(acc.effects, extend.effects);\n    check(extend.reducers, reducersCache, reducersCount);\n    (0, _assign2.default)(acc.reducers, extend.reducers);\n    return acc;\n  }, base);\n\n  log(model, 'state', stateCount);\n  log(model, 'subscriptions', subscriptionsCount);\n  log(model, 'effects', effectsCount);\n  log(model, 'reducers', reducersCount);\n  return model;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dva-model-extend/lib/index.js\n// module id = 1263\n// module chunks = 2 8 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29","import modelExtend from 'dva-model-extend'\n\nexport const model = {\n  reducers: {\n    updateState (state: any, { payload }: any) {\n      return {\n        ...state,\n        ...payload,\n      }\n    },\n  },\n}\n\nexport const pageModel = modelExtend(model, {\n\n  state: {\n    list: [],\n    pagination: {\n      showSizeChanger: true,\n      showQuickJumper: true,\n      showTotal: (total: string) => `共 ${total} 条数据`,\n      current: 1,\n      total: 0,\n      pageSize: 10,\n    },\n    searchValue: '',\n  },\n\n  reducers: {\n    querySuccess (state: any, { payload }: any) {\n      const { list, pagination } = payload\n      return {\n        ...state,\n        list,\n        pagination: {\n          ...state.pagination,\n          ...pagination,\n        },\n      }\n    },\n  },\n\n})\n\n\n// export default {\n//   model,\n//   pageModel,\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/common.tsx","import { getLocalStorage } from '../utils/utils'\nimport config from '../utils/config'\nimport request from '../utils/request'\n\nconst { api } = config\nconst {\n  voteList,\n  activity,\n  activitysong,\n  voterdetail,\n  updatevote,\n} = api\n\nexport function queryVoteList (params: any) {\n  return request({\n    url: voteList,\n    method: 'get',\n    data: params,\n  })\n}\n\nexport function addVote (params: any) {\n  const SystemAdmin = getLocalStorage('SystemAdmin')\n  return request({\n    url: activity.replace(':uid', SystemAdmin.id),\n    method: 'post',\n    data: params,\n  })\n}\nexport function queryActivitysongList (params: any) {\n  return request({\n    url: activitysong,\n    method: 'get',\n    data: params,\n  })\n}\nexport function queryVoterdetailList (params: any) {\n  return request({\n    url: voterdetail.replace(':act_id', params.act_id),\n    method: 'get',\n    // data: {\n    //   simp_name: params.simp_name || '',\n    // },\n  })\n}\nexport function queryUpdatevote (params: any) {\n  const SystemAdmin = getLocalStorage('SystemAdmin')\n  const url = updatevote.replace(':uid', SystemAdmin.id)\n  return request({\n    url: url.replace(':id', params.id),\n    method: 'put',\n    data: params,\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/active.ts"],"sourceRoot":""}