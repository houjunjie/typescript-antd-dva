{"version":3,"sources":["routes/banner/indexBanner.tsx","routes/banner/Template.tsx","routes/banner/component/list.tsx","routes/banner/component/list.less","webpack:///./src/routes/banner/component/list.less?f073","routes/banner/component/Model.tsx"],"names":["__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_1_dva__","_a","indexbanner","loading","dispatch","location","templateProps","__assign","type","modelName","tabsList","title","key","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","__WEBPACK_IMPORTED_MODULE_2__components__","inner","__WEBPACK_IMPORTED_MODULE_3__Template__","TabPane","__WEBPACK_IMPORTED_MODULE_1_antd__","__rest","console","log","modalVisible","currentItem","modalType","focusList","tabKey","previewVisible","previewImage","query","__WEBPACK_IMPORTED_MODULE_3_query_string___default","parse","search","pathname","handlePreview","visible","url","payload","modalProps","item","maskClosable","wrapClassName","onOk","data","position","onCancel","columns","dataIndex","render","text","alt","style","cursor","width","src","onClick","record","listProps","pagination","dataSource","effects","onChange","page","__WEBPACK_IMPORTED_MODULE_2_dva_router__","push","stringify","current","pageSize","addFocus","__WEBPACK_IMPORTED_MODULE_4__components__","defaultActiveKey","onTabClick","map","tab","textAlign","marginBottom","__WEBPACK_IMPORTED_MODULE_5__component_list__","__WEBPACK_IMPORTED_MODULE_6__component_Model__","footer","tableProps","__WEBPACK_IMPORTED_MODULE_0_react__","bordered","className","__WEBPACK_IMPORTED_MODULE_2__list_less___default","table","rowKey","id","content","__webpack_require__","module","i","options","hmr","transform","locals","exports","undefined","image","FormItem","Item","RangePicker","formItemLayout","labelCol","span","wrapperCol","Model","_super","_this","apply","this","arguments","state","fileList","props","img_url","size","uid","name","handleOk","_b","form","validateFields","getFieldsValue","errors","sendData","online","__WEBPACK_IMPORTED_MODULE_2_moment___default","date","format","downline","response","jump_link","sort","handleCancel","setState","file","thumbUrl","handleChange","range","start","end","result","disabledDate","endOf","disabledDateTime","disabledHours","splice","disabledMinutes","disabledSeconds","__extends","prototype","getFieldDecorator","_c","modalOpts","uploadButton","layout","label","hasFeedback","initialValue","rules","required","message","action","listType","folder","onPreview","length","showTime","hideDisabledOptions","defaultValue","placeholder","PureComponent","create"],"mappings":"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","file":"static/js/5.8e5638de.chunk.js","sourcesContent":["import React from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'dva'\nimport { Page } from '../../components'\nimport Template from './Template'\ninterface Iprops {\n  indexbanner: any,\n  dispatch: any,\n  loading: any,\n  location: any\n}\nconst Index = ({\n  indexbanner, dispatch, loading, location,\n}: Iprops) => {\n  const templateProps = {\n    ...indexbanner,\n    dispatch,\n    loading,\n    location,\n    type: 1,\n    modelName: 'indexbanner',\n    tabsList: [\n      {\n        title: 'banner1',\n        key: 1,\n      },\n      {\n        title: 'banner2',\n        key: 2,\n      },\n      {\n        title: 'banner3',\n        key: 3,\n      },\n      {\n        title: 'banner4',\n        key: 4,\n      },\n      {\n        title: 'banner5',\n        key: 5,\n      },\n    ],\n  }\n  return (<Page inner={true}>\n    <Template {...templateProps} />\n  </Page>)\n}\n\n// Index.propTypes = {\n//   indexbanner: PropTypes.object,\n//   loading: PropTypes.object,\n//   location: PropTypes.object,\n//   dispatch: PropTypes.func,\n// }\n\nexport default connect(({ indexbanner, loading }: Iprops) => ({ indexbanner, loading }))(Index)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/banner/indexBanner.tsx","import React from 'react'\n// import PropTypes from 'prop-types'\nimport { Tabs, Button, Modal } from 'antd'\nimport { routerRedux } from 'dva/router'\nimport queryString from 'query-string'\nimport { Page } from '../../components'\nimport List from './component/list'\n\nimport Model from './component/Model'\n\nconst { TabPane } = Tabs\n\n// const EnumPostStatus = {\n//   banner1: 1,\n//   banner2: 2,\n// }\n\ninterface Iprops {\n  dispatch: any,\n  loading: any,\n  location: any,\n  modalVisible?: any,\n  currentItem?: any,\n  modalType?: any,\n  focusList?: any,\n  tabKey?: any,\n  previewVisible?: any,\n  previewImage?: any,\n  type?: any,\n  modelName?: any,\n  tabsList?: any\n}\nconst Template = ({\n  dispatch, loading, location, ...templateProps\n}: Iprops) => {\n  console.log(templateProps, 'templateProps')\n  const {\n    modalVisible, currentItem, modalType, focusList, tabKey, previewVisible, previewImage, type, modelName, tabsList,\n  } = templateProps\n  location.query = queryString.parse(location.search)\n  const { query, pathname } = location\n  const handleModalVisible = (item: any) => {\n    console.log(item)\n    // this.setState({\n    //   modalVisible: !!flag,\n    // });\n    dispatch({\n      type: `${modelName}/showModal`,\n      payload: {\n        modalType: 'update',\n        currentItem: item,\n      },\n    })\n  }\n  const handlePreview = (visible: boolean, url = '') => {\n    dispatch({\n      type: `${modelName}/updateState`,\n      payload: {\n        previewImage: url,\n        previewVisible: visible,\n      },\n    })\n  }\n\n  const modalProps = {\n    item: modalType === 'create' ? {} : currentItem,\n    visible: modalVisible,\n    maskClosable: false,\n    // confirmLoading: loading.effects['user/update'],\n    title: `${modalType === 'create' ? '新增' : '编辑'}`,\n    wrapClassName: 'vertical-center-modal',\n    onOk (data: any) {\n      console.log(data)\n      if (modalType === 'create') {\n        dispatch({\n          type: `${modelName}/addFocus`,\n          payload: {\n            ...data,\n            type,\n            position: tabKey,\n          },\n        })\n      } else {\n        dispatch({\n          type: `${modelName}/queryModifyFocus`,\n          payload: data,\n        })\n      }\n    },\n    onCancel () {\n      dispatch({\n        type: `${modelName}/hideModal`,\n      })\n    },\n  }\n\n  const columns = [\n    {\n      title: '序号',\n      dataIndex: 'sort',\n    },\n    {\n      title: '图片',\n      dataIndex: 'img_url',\n      render: (text: string) => <img alt=\"图片\" style={{ cursor: 'pointer' }} width={30} src={text} onClick={() => handlePreview(true, text)} />,\n    },\n    {\n      title: '链接',\n      dataIndex: 'jump_link',\n    },\n    {\n      title: '上线时间',\n      dataIndex: 'online',\n      // sorter: true,\n      // render: val => <span>{moment(val).format('YYYY-MM-DD HH:mm:ss')}</span>,\n    },\n    {\n      title: '状态',\n      dataIndex: 'status',\n    },\n    {\n      title: '操作',\n      render: (text: any, record: any) => <a onClick={() => handleModalVisible(record)}>编辑</a>,\n    },\n  ]\n\n  const listProps = {\n    pagination: false,\n    dataSource: focusList[tabKey],\n    columns,\n    loading: loading.effects[`${modelName}/query`],\n    onChange (page: any) {\n      dispatch(routerRedux.push({\n        pathname,\n        search: queryString.stringify({\n          ...query,\n          page: page.current,\n          pageSize: page.pageSize,\n        }),\n      }))\n    },\n  }\n\n  const handleTabClick = (key: number) => {\n    console.log(key, focusList[key])\n    dispatch({\n      type: `${modelName}/updateState`,\n      payload: {\n        tabKey: key,\n      },\n    })\n  }\n  const addFocus = () => {\n    dispatch({\n      type: `${modelName}/showModal`,\n      payload: {\n        modalType: 'create',\n      },\n    })\n  }\n  return (<Page inner={true}>\n    <Tabs defaultActiveKey={tabKey} onTabClick={handleTabClick}>\n      {\n        tabsList.map((item: any) => {\n          return (\n            <TabPane tab={item.title} key={item.key}>\n              <div style={{ textAlign: 'right', marginBottom: 10 }}><Button type=\"primary\" onClick={addFocus}>新增焦点图</Button></div>\n              <List {...listProps} />\n            </TabPane>\n          )\n        })\n      }\n\n      {/* <TabPane tab=\"banner2\" key=\"2\">\n        <div style={{ textAlign: 'right', marginBottom: 10 }}><Button type=\"primary\" onClick={addFocus}>新增焦点图</Button></div>\n        <List {...listProps} />\n      </TabPane>\n      <TabPane tab=\"banner3\" key=\"3\">\n        <div style={{ textAlign: 'right', marginBottom: 10 }}><Button type=\"primary\" onClick={addFocus}>新增焦点图</Button></div>\n        <List {...listProps} />\n      </TabPane>\n      <TabPane tab=\"banner4\" key=\"4\">\n        <div style={{ textAlign: 'right', marginBottom: 10 }}><Button type=\"primary\" onClick={addFocus}>新增焦点图</Button></div>\n        <List {...listProps} />\n      </TabPane>\n      <TabPane tab=\"banner5\" key=\"5\">\n        <div style={{ textAlign: 'right', marginBottom: 10 }}><Button type=\"primary\" onClick={addFocus}>新增焦点图</Button></div>\n        <List {...listProps} />\n      </TabPane> */}\n    </Tabs>\n    {modalVisible && <Model {...modalProps} />}\n    <Modal visible={previewVisible} footer={null} onCancel={() => handlePreview(false)}>\n      <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n    </Modal>\n  </Page>)\n}\n\n// Template.propTypes = {\n//   templateProps: PropTypes.object,\n//   loading: PropTypes.object,\n//   location: PropTypes.object,\n//   dispatch: PropTypes.func,\n//   type: PropTypes.number,\n//   modelName: PropTypes.string,\n// }\n\nexport default Template\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/banner/Template.tsx","import * as React from 'react'\nimport { Table } from 'antd'\nimport styles from './list.less'\n\nconst List = ({ ...tableProps }) => {\n\n\n  return (\n    <div>\n      <Table\n        {...tableProps}\n        bordered={true}\n        // scroll={{ x: 1200 }}\n        // columns={columns}\n        // simple\n        className={styles.table}\n        rowKey={(record: any) => record.id}\n      />\n    </div>\n  )\n}\n\nexport default List\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/banner/component/list.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./list.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./list.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../../node_modules/postcss-loader/lib/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./list.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/banner/component/list.less\n// module id = 1272\n// module chunks = 4 5 6 7","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".table_1974l td.image_3HJrd{line-height:1}.table_1974l td.image_3HJrd img{border-radius:2px}.table_1974l .ant-table-tbody>tr>td,.table_1974l .ant-table-thead>tr>th{height:60px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"table\": \"table_1974l\",\n\t\"image\": \"image_3HJrd\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/typings-for-css-modules-loader/lib?{\"modules\":true,\"namedExport\":true,\"camelCase\":true,\"minimize\":true,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js!./src/routes/banner/component/list.less\n// module id = 1273\n// module chunks = 4 5 6 7","import React from 'react'\n// import PropTypes from 'prop-types'\nimport { Form, Input, Modal, DatePicker, Upload } from 'antd'\nimport moment from 'moment'\n\nconst FormItem = Form.Item\nconst { RangePicker } = DatePicker\n\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n}\ndeclare type UploadFileStatus = 'error' | 'success' | 'done' | 'uploading' | 'removed';\ninterface IuploadFile {\n  uid: number;\n  size: number;\n  name: string;\n  filename?: string;\n  lastModified?: number;\n  lastModifiedDate?: Date;\n  url?: string;\n  status?: UploadFileStatus;\n  percent?: number;\n  thumbUrl?: string;\n  isNotImage?: boolean;\n  originFileObj?: File;\n  response?: any;\n  error?: any;\n  linkProps?: any;\n  type: string;\n}\ninterface Istate {\n  fileList: IuploadFile[],\n  previewVisible: boolean,\n  previewImage: string\n}\n\n// interface Iprops {\n//   item?: any,\n//   loading?: any,\n//   form?: any,\n//   dispatch?: any,\n//   onOk?: any,\n//   modalProps?: any\n// }\n\nclass Model extends React.PureComponent<any, Istate> {\n  // constructor (props) {\n  //   super(props)\n  //   this.\n  // }\n  public state = {\n    fileList: this.props.item.img_url ? [{\n      size: 1,\n      uid: -1,\n      name: '',\n      // status: 'done',\n      url: this.props.item.img_url,\n      type: 'select'\n    }] : [],\n    previewVisible: false,\n    previewImage: '',\n  }\n  public handleOk = () => {\n    const {\n      item,\n      onOk,\n      form: {\n        validateFields,\n        getFieldsValue,\n      },\n    } = this.props\n    validateFields((errors: any) => {\n      if (errors) {\n        return\n      }\n      const data = {\n        ...getFieldsValue(),\n      }\n      const sendData = {\n        ...item,\n      }\n      // console.log(data)\n      sendData.online = moment(data.date[0]).format('YYYY-MM-DD HH:mm:ss')\n      sendData.downline = moment(data.date[1]).format('YYYY-MM-DD HH:mm:ss')\n      // sendData.img_url = 'http://192.168.1.99:5600/singing/ffffff.png'\n      sendData.img_url = typeof data.img_url === 'string' ? data.img_url : data.img_url.fileList[0].response.data.url\n      sendData.jump_link = data.jump_link\n      sendData.sort = data.sort\n      // console.log(sendData, 22222)\n      // data.address = data.address.join(' ')\n      onOk(sendData)\n    })\n  }\n  public handleCancel = () => {\n    this.setState({\n      previewVisible: false,\n    })\n  }\n  public handlePreview = (file: any) => {\n    this.setState({\n      previewImage: file.url || file.thumbUrl,\n      previewVisible: true,\n    })\n  }\n  public handleChange = ({ fileList }: any) => {\n    // console.log('fileList', fileList)\n    this.setState({\n      fileList,\n    })\n  }\n  public range = (start: number, end: number) => {\n    const result = []\n    for (let i = start; i < end; i++) {\n      result.push(i)\n    }\n    return result\n  }\n  public disabledDate = (current: any) => {\n    // Can not select days before today and today\n    return current && current < moment().endOf('day')\n  }\n  public disabledDateTime = () => {\n    return {\n      disabledHours: () => this.range(0, 24).splice(4, 20),\n      disabledMinutes: () => this.range(30, 60),\n      disabledSeconds: () => [55, 56],\n    }\n  }\n  public render (): JSX.Element {\n    const {\n      item = {},\n      onOk,\n      form: {\n        getFieldDecorator,\n      },\n      ...modalProps\n    } = this.props\n    const {\n      fileList, previewVisible, previewImage,\n    } = this.state\n    const modalOpts = {\n      ...modalProps,\n      onOk: this.handleOk,\n    }\n    const uploadButton = (\n      <div>\n        <div className=\"ant-upload-text\">上传</div>\n      </div>\n    )\n    const dateFormat = 'YYYY-MM-DD HH-mm-ss';\n    \n    return (\n      <div>\n        <Modal {...modalOpts}>\n          <Form layout=\"horizontal\">\n            <FormItem label=\"序号\" hasFeedback={true} {...formItemLayout}>\n              {getFieldDecorator('sort', {\n              initialValue: item.sort,\n              rules: [\n                {\n                  required: true,\n                  message: '请输入序号',\n                },\n              ],\n            })(<Input />)}\n            </FormItem>\n            <FormItem label=\"链接\" hasFeedback={true} {...formItemLayout}>\n              {getFieldDecorator('jump_link', {\n              initialValue: item.jump_link,\n              rules: [\n                {\n                  required: true,\n                  message: '请输入链接',\n                },\n              ],\n            })(<Input />)}\n            </FormItem>\n\n            <FormItem label=\"图片\" {...formItemLayout}>\n              {getFieldDecorator('img_url', {\n                initialValue: item.img_url,\n                rules: [\n                  {\n                    required: true,\n                    message: '请上传图片',\n                  },\n                ],\n            })(<Upload\n              name=\"file\"\n              action=\"/v4.0/base/material\"\n              listType=\"picture-card\"\n              fileList={fileList}\n              data={{ folder: 'singing' }}\n              // showUploadList={false}\n              onPreview={this.handlePreview}\n              onChange={this.handleChange}\n              className=\"upload\"\n            >\n              {fileList.length >= 1 ? null : uploadButton}\n            </Upload>)}\n            </FormItem>\n            <FormItem label=\"日期\" {...formItemLayout}>\n              {getFieldDecorator('date', {\n              initialValue: item.online ? [moment(item.online, dateFormat), moment(item.downline, dateFormat)] : [],\n              rules: [\n                {\n                  required: true,\n                  message: '请选择日期',\n                },\n              ],\n            })(<RangePicker\n              disabledDate={this.disabledDate}\n              // disabledTime={this.disabledRangeTime}\n              showTime={{\n                hideDisabledOptions: true,\n                defaultValue: [moment('00:00:00', 'HH:mm:ss'), moment('11:59:59', 'HH:mm:ss')],\n              }}\n              format=\"YYYY-MM-DD HH:mm:ss\"\n              placeholder={['选择开始时间', '结束时间']}\n            />)}\n            </FormItem>\n          </Form>\n        </Modal>\n        <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n        </Modal>\n      </div>\n    )\n  }\n}\n// const modal = ({\n//   item = {},\n//   onOk,\n//   form: {\n//     getFieldDecorator,\n//     validateFields,\n//     getFieldsValue,\n//   },\n//   ...modalProps\n// }) => {\n//   let loading = false\n//   // const getBase64 = (img, callback) => {\n//   //   const reader = new FileReader()\n//   //   reader.addEventListener('load', () => callback(reader.result))\n//   //   reader.readAsDataURL(img)\n//   // }\n//   const handleOk = () => {\n//     validateFields((errors) => {\n//       if (errors) {\n//         return\n//       }\n//       const data = {\n//         ...getFieldsValue(),\n//         key: item.key,\n//       }\n//       console.log(data, 22222)\n//       // data.address = data.address.join(' ')\n//       onOk(data)\n//     })\n//   }\n\n//   const modalOpts = {\n//     ...modalProps,\n//     onOk: handleOk,\n//   }\n//   const normFile = (e) => {\n//     if (Array.isArray(e)) {\n//       return e\n//     }\n//     return e && e.fileList\n//   }\n//   const handleChange = (info) => {\n//     console.log(info, 'upload')\n//     if (info.file.status === 'uploading') {\n//       loading = true\n//       return\n//     }\n//     if (info.file.status === 'done') {\n//       // Get this url from response in real world.\n//       // getBase64(info.file.originFileObj, (imageUrl) => {\n//       //   item.image = imageUrl\n//       //   loading = false\n//       // })\n//     }\n//   }\n//   const beforeUpload = (file) => {\n//     console.log(file, 22)\n//     // item.image = file;\n//   }\n//   const uploadButton = (\n//     <div>\n//       <Icon type={loading ? 'loading' : 'plus'} />\n//       <div className=\"ant-upload-text\">Upload</div>\n//     </div>\n//   )\n//   const onChange = (val) => {\n//     console.log(val)\n//   }\n//   // console.log(modalOpts)\n//   const dateFormat = 'YYYY-MM-DD'\n//   // console.log([moment(item.online, dateFormat).format('YYYY-MM-DD'), moment(item.downline, dateFormat).format('YYYY-MM-DD')])\n//   return (\n//     <Modal {...modalOpts}>\n//       <Form layout=\"horizontal\">\n//         <FormItem label=\"序号\" hasFeedback {...formItemLayout}>\n//           {getFieldDecorator('sort', {\n//             initialValue: item.sort,\n//             rules: [\n//               {\n//                 required: true,\n//               },\n//             ],\n//           })(<Input />)}\n//         </FormItem>\n//         <FormItem label=\"链接\" hasFeedback {...formItemLayout}>\n//           {getFieldDecorator('jump_link', {\n//             initialValue: item.jump_link,\n//             rules: [\n//               {\n//                 required: true,\n//               },\n//             ],\n//           })(<Input />)}\n//         </FormItem>\n\n//         <FormItem label=\"图片\" {...formItemLayout}>\n//           {getFieldDecorator('img_url', {\n//             valuePropName: 'img_url',\n//             getValueFromEvent: normFile,\n//           })(<Upload\n//             // name=\"file\"\n//             listType=\"picture-card\"\n//             className=\"avatar-uploader\"\n//             showUploadList={false}\n//             // data={{ folder: 'singing' }}\n//             action=\"//jsonplaceholder.typicode.com/posts/\"\n//             // action=\"/v4.0/base/material\"\n//             beforeUpload={beforeUpload}\n//             onChange={handleChange}\n//           >\n//             {item.img_url ? <img src={item.img_url} alt=\"\" /> : uploadButton}\n//           </Upload>)}\n//         </FormItem>\n//         <FormItem label=\"日期\" {...formItemLayout}>\n//           {getFieldDecorator('date', {\n//             initialValue: [moment(item.online, dateFormat), moment(item.downline, dateFormat)],\n//             rules: [\n//               {\n//                 required: true,\n//               },\n//             ],\n//           })(<RangePicker onChange={onChange} />)}\n//         </FormItem>\n//       </Form>\n//     </Modal>\n//   )\n// }\n\n// modal.propTypes = {\n//   form: PropTypes.object.isRequired,\n//   type: PropTypes.string,\n//   item: PropTypes.object,\n//   onOk: PropTypes.func,\n// }\n\nexport default Form.create()(Model)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/banner/component/Model.tsx"],"sourceRoot":""}