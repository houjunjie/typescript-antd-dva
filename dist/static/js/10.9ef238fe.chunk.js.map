{"version":3,"sources":["routes/works/workslists.tsx","routes/works/works.less","webpack:///./src/routes/works/works.less?fa5d","routes/works/Modals/OffShelfModel.tsx"],"names":["Search","__WEBPACK_IMPORTED_MODULE_3_antd__","WorksLists","_super","_this","apply","this","arguments","showModal","item","props","dispatch","type","payload","modalVisible","currentItem","handleSearch","val","searchValue","__extends","prototype","render","_a","workslists","loading","location","list","pagination","query","pathname","listProps","dataSource","columns","title","dataIndex","text","record","index","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","__WEBPACK_IMPORTED_MODULE_6__works_less___default","avatar","src","alt","name","sorter","b","Date","created_at","getTime","updated_at","onClick","effects","onChange","page","__WEBPACK_IMPORTED_MODULE_2_dva_router__","push","search","__WEBPACK_IMPORTED_MODULE_4_query_string___default","stringify","__assign","current_page","current","per_page","pageSize","modalProps","visible","maskClosable","wrapClassName","onOk","data","status","onCancel","__WEBPACK_IMPORTED_MODULE_0_react__","align","span","style","marginBottom","textRight","width","placeholder","onSearch","enterButton","bordered","rowKey","id","__WEBPACK_IMPORTED_MODULE_5__Modals_OffShelfModel__","PureComponent","__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_1_dva__","content","__webpack_require__","module","i","options","hmr","transform","locals","exports","undefined","mr10","reasonType","__WEBPACK_IMPORTED_MODULE_2__utils_config__","FormItem","__WEBPACK_IMPORTED_MODULE_1_antd__","Item","Option","TextArea","formItemLayout","labelCol","wrapperCol","create","_b","_c","form","getFieldDecorator","validateFields","getFieldsValue","__rest","modalOpts","errors","layout","label","hasFeedback","rules","required","message","showSearch","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","map","key","value","autosize"],"mappings":"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","file":"static/js/10.9ef238fe.chunk.js","sourcesContent":["import React, { Fragment } from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'dva'\nimport { routerRedux } from 'dva/router'\nimport { Row, Col, Input, Table, Button } from 'antd'\nimport queryString from 'query-string'\nimport Model from './Modals/OffShelfModel'\n\nimport style from './works.less'\n\n// import style from './songlists.less'\nconst { Search } = Input\ninterface Iprops {\n  workslists: any,\n  loading: any,\n  dispatch: any,\n  location: any,\n}\n\nclass WorksLists extends React.PureComponent<Iprops> {\n  public showModal = (item: any) => {\n    this.props.dispatch({\n      type: 'workslists/updateState',\n      payload: {\n        modalVisible: true,\n        currentItem: item,\n      },\n    })\n  }\n  public handleSearch = (val: string) => {\n    this.props.dispatch({\n      type: 'workslists/updateState',\n      payload: {\n        searchValue: val,\n      },\n    })\n    this.props.dispatch({\n      type: 'workslists/query',\n      payload: {},\n    })\n  }\n  public render () {\n    const {\n      workslists, dispatch, loading, location,\n    } = this.props\n    const {\n      list, pagination, currentItem, modalVisible,\n    } = workslists\n    const { query, pathname } = location\n    const columns = [\n      {\n        title: '序号',\n        dataIndex: '',\n        render (text: any, record: any, index: number) {\n          // TODO\n          return index + 1\n        },\n      },\n      {\n        title: '视频',\n        dataIndex: 'file',\n        render: (val: string) => <span className={style.avatar}><img src={val} alt=\"用户头像\" /></span>,\n      },\n      {\n        title: '配文',\n        dataIndex: 'description',\n      },\n      {\n        title: '用户',\n        dataIndex: 'user',\n        render: (item: any) => <span>{item.name}</span>,\n      },\n      {\n        title: '提交时间',\n        dataIndex: 'created_at',\n        sorter: (a: any, b: any) => {\n          return new Date(a.created_at).getTime() - new Date(b.created_at).getTime()\n        },\n      },\n      {\n        title: '审核时间',\n        dataIndex: 'updated_at',\n        sorter: (a: any, b: any) => {\n          return new Date(a.updated_at).getTime() - new Date(b.updated_at).getTime()\n        },\n      },\n      {\n        title: '审核人',\n        dataIndex: 'user_id',\n      },\n      {\n        title: '操作',\n        render: (val: any) => <Button onClick={() => this.showModal(val)}>下架</Button>,\n      },\n    ]\n    const listProps = {\n      pagination,\n      dataSource: list,\n      columns,\n      loading: loading.effects['workslists/query'],\n      onChange (page: any) {\n        dispatch(routerRedux.push({\n          pathname,\n          search: queryString.stringify({\n            ...query,\n            current_page: page.current,\n            per_page: page.pageSize,\n          }),\n        }))\n      },\n    }\n    const modalProps = {\n      item: currentItem,\n      visible: modalVisible,\n      maskClosable: false,\n      // confirmLoading: loading.effects['user/update'],\n      title: '下架',\n      wrapClassName: 'vertical-center-modal',\n      onOk (data: any) {\n        dispatch({\n          type: 'workslists/pass',\n          payload: {\n            // modalVisible: false,\n            status: 3,\n            ...data,\n          },\n        })\n        dispatch({\n          type: 'workslists/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n      onCancel () {\n        dispatch({\n          type: 'workslists/updateState',\n          payload: {\n            modalVisible: false,\n          },\n        })\n      },\n    }\n    return (\n      <Fragment>\n        <Row className=\"margin-bottom\" type=\"flex\" align=\"middle\">\n          <Col span={6}>\n            <h3 style={{ marginBottom: 0 }}>作品列表</h3>\n          </Col>\n          <Col span={18} className={style.textRight}>\n            <Search style={{ width: 300 }} placeholder=\"请输入要搜索的作品名称\" onSearch={this.handleSearch} enterButton={true} />\n          </Col>\n        </Row>\n        <Table\n          {...listProps}\n          bordered={true}\n          // scroll={{ x: 1200 }}\n          // columns={columns}\n          // simple\n          rowKey={record => record.id}\n        />\n        {modalVisible && <Model {...modalProps} />}\n      </Fragment>\n    )\n  }\n}\nexport default connect(({\n  workslists, loading, dispatch,\n}: Iprops) => ({\n  workslists, loading, dispatch,\n}))(WorksLists)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/works/workslists.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/works/works.less\n// module id = 1266\n// module chunks = 9 10 11 30 31 32","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".textRight_2G87a{text-align:right}.avatar_2V6Bf{display:block;margin:0 auto;width:80px;height:80px;border-radius:50%;overflow:hidden}.avatar_2V6Bf img{width:100%}.mr10_3sCER{margin-right:10px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"textRight\": \"textRight_2G87a\",\n\t\"avatar\": \"avatar_2V6Bf\",\n\t\"mr10\": \"mr10_3sCER\"\n};\n\n\n// WEBPACK FOOTER //\n// ./node_modules/typings-for-css-modules-loader/lib?{\"modules\":true,\"namedExport\":true,\"camelCase\":true,\"minimize\":true,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js!./src/routes/works/works.less","import React from 'react'\n// import PropTypes from 'prop-types'\nimport { Form, Input, Modal, Select } from 'antd'\nimport config from '../../../utils/config'\n\nconst { reasonType } = config\n\nconst FormItem = Form.Item\nconst { Option } = Select\nconst { TextArea } = Input\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n}\ninterface Iprops {\n  item: any,\n  onOk: any,\n  form: any,\n  [propsname: string]: any\n}\n\nconst modal = ({\n  item = {},\n  onOk,\n  form: {\n    getFieldDecorator,\n    validateFields,\n    getFieldsValue,\n  },\n  ...modalProps\n}: Iprops) => {\n  const handleOk = () => {\n    validateFields((errors: any) => {\n      if (errors) {\n        return\n      }\n      const data = {\n        ...getFieldsValue(),\n        id: item.id,\n      }\n      onOk(data)\n    })\n  }\n\n  const modalOpts = {\n    ...modalProps,\n    onOk: handleOk,\n  }\n  return (\n    <Modal {...modalOpts}>\n      <Form layout=\"horizontal\">\n        <FormItem label=\"下架原因\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('reason_type', {\n            rules: [\n              {\n                required: true,\n                message: '请选择下架原因',\n              },\n            ],\n          })(<Select\n            showSearch={true}\n            placeholder=\"请选择原因\"\n            optionFilterProp=\"children\"\n            filterOption={(input: string, option: any) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n          >\n            {reasonType.map((data, index) => <Option key={index} value={index + 1}>{data}</Option>)}\n          </Select>)}\n        </FormItem>\n        <FormItem label=\"备注\" hasFeedback={true} {...formItemLayout}>\n          {getFieldDecorator('remark', {\n            // initialValue: item.day,\n            rules: [\n              {\n                // required: true,\n              },\n            ],\n          })(<TextArea autosize={true} />)}\n        </FormItem>\n      </Form>\n    </Modal>\n  )\n}\n\n// modal.propTypes = {\n//   form: PropTypes.object.isRequired,\n//   type: PropTypes.string,\n//   item: PropTypes.object,\n//   onOk: PropTypes.func,\n// }\n\nexport default Form.create()(modal)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/works/Modals/OffShelfModel.tsx"],"sourceRoot":""}