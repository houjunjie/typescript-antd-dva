{"version":3,"sources":["routes/works/comment.tsx","routes/works/works.less","webpack:///./src/routes/works/works.less?fa5d"],"names":["Search","__WEBPACK_IMPORTED_MODULE_3_antd__","Comment","_super","_this","apply","this","arguments","showModal","item","dispatch","props","confirm","title","content","onOk","type","payload","id","onCancel","console","log","handleSearch","val","searchValue","__extends","prototype","render","_a","comment","loading","location","list","pagination","query","pathname","listProps","dataSource","columns","dataIndex","text","record","index","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","src","alt","width","name","sorter","b","Date","created_at","getTime","onClick","effects","onChange","page","__WEBPACK_IMPORTED_MODULE_2_dva_router__","push","search","__WEBPACK_IMPORTED_MODULE_4_query_string___default","stringify","__assign","current_page","current","per_page","pageSize","__WEBPACK_IMPORTED_MODULE_0_react__","align","span","style","marginBottom","placeholder","onSearch","enterButton","bordered","rowKey","PureComponent","__webpack_exports__","Object","__WEBPACK_IMPORTED_MODULE_1_dva__","__webpack_require__","module","i","options","hmr","transform","locals","exports","undefined","textRight","avatar","mr10"],"mappings":"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","file":"static/js/32.67a57679.chunk.js","sourcesContent":["import React, { Fragment } from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'dva'\nimport { routerRedux } from 'dva/router'\nimport { Row, Col, Input, Table, Button, Modal } from 'antd'\nimport queryString from 'query-string'\n\nimport './works.less'\n\n// import style from './songlists.less'\nconst { Search } = Input\ninterface Iprops {\n  comment: any,\n  loading: any,\n  dispatch: any,\n  location: any,\n}\n\nclass Comment extends React.PureComponent<Iprops> {\n  \n  public showModal = (item: any) => {\n    const { dispatch } = this.props\n    Modal.confirm({\n      title: '删除',\n      content: '删除后不可恢复，确定要删除吗？',\n      onOk () {\n        dispatch({\n          type: 'comment/delComment',\n          payload: {\n            id: item.id,\n          },\n        })\n      },\n      onCancel () {console.log(1)},\n    })\n  }\n  public handleSearch = (val: string) => {\n    this.props.dispatch({\n      type: 'comment/updateState',\n      payload: {\n        searchValue: val,\n      },\n    })\n    this.props.dispatch({\n      type: 'comment/query',\n      payload: {},\n    })\n  }\n  public render () {\n    const {\n      comment, dispatch, loading, location,\n    } = this.props\n    const {\n      list, pagination,\n    } = comment\n    const { query, pathname } = location\n    const columns = [\n      {\n        title: '序号',\n        dataIndex: '',\n        render (text: string, record: any, index: number) {\n          // TODO\n          return index + 1\n        },\n      },\n      {\n        title: '主题作品',\n        dataIndex: 'cover',\n        render: (val: string) => <span className=\"avatar\"><img src={val} alt=\"用户头像\" /></span>,\n      },\n      {\n        title: '主题配文',\n        dataIndex: 'description',\n        width: 200,\n      },\n      {\n        title: '评论详情',\n        dataIndex: 'content',\n      },\n      {\n        title: '用户',\n        dataIndex: 'user',\n        width: 150,\n        render: (item: any) => <span>{item.name}</span>,\n      },\n      {\n        title: '发布时间',\n        dataIndex: 'created_at',\n        width: 200,\n        sorter: (a: any, b: any) => {\n          return new Date(a.created_at).getTime() - new Date(b.created_at).getTime()\n        },\n      },\n      {\n        title: '操作',\n        render: (val: any) => <Button onClick={() => this.showModal(val)}>删除</Button>,\n      },\n    ]\n    const listProps = {\n      pagination,\n      dataSource: list,\n      columns,\n      loading: loading.effects['comment/query'],\n      onChange (page: any) {\n        dispatch(routerRedux.push({\n          pathname,\n          search: queryString.stringify({\n            ...query,\n            current_page: page.current,\n            per_page: page.pageSize,\n          }),\n        }))\n      },\n    }\n    return (\n      <Fragment>\n        <Row className=\"margin-bottom\" type=\"flex\" align=\"middle\">\n          <Col span={6}>\n            <h3 style={{ marginBottom: 0 }}>评论</h3>\n          </Col>\n          <Col span={18} className=\"textRight\">\n            <Search style={{ width: 300 }} placeholder=\"请输入要搜索的作品名称\" onSearch={this.handleSearch} enterButton={true} />\n          </Col>\n        </Row>\n        <Table\n          {...listProps}\n          bordered={true}\n          // scroll={{ x: 1200 }}\n          // columns={columns}\n          // simple\n          rowKey={record => record.id}\n        />\n      </Fragment>\n    )\n  }\n}\nexport default connect(({\n  comment, loading, dispatch,\n}: Iprops) => ({\n  comment, loading, dispatch,\n}))(Comment)\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/works/comment.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--1-oneOf-4-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./works.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/routes/works/works.less\n// module id = 1266\n// module chunks = 9 10 11 30 31 32","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".textRight_2G87a{text-align:right}.avatar_2V6Bf{display:block;margin:0 auto;width:80px;height:80px;border-radius:50%;overflow:hidden}.avatar_2V6Bf img{width:100%}.mr10_3sCER{margin-right:10px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"textRight\": \"textRight_2G87a\",\n\t\"avatar\": \"avatar_2V6Bf\",\n\t\"mr10\": \"mr10_3sCER\"\n};\n\n\n// WEBPACK FOOTER //\n// ./node_modules/typings-for-css-modules-loader/lib?{\"modules\":true,\"namedExport\":true,\"camelCase\":true,\"minimize\":true,\"localIdentName\":\"[local]_[hash:base64:5]\"}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js!./src/routes/works/works.less"],"sourceRoot":""}